<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Grafiken erstellen | R Workshop - Sozialwissenschaften</title>
  <meta name="description" content="Einführung in R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Grafiken erstellen | R Workshop - Sozialwissenschaften" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Einführung in R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Grafiken erstellen | R Workshop - Sozialwissenschaften" />
  
  <meta name="twitter:description" content="Einführung in R" />
  

<meta name="author" content="Yannick Diehl und Daniel Moosdorf" />


<meta name="date" content="2022-05-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="multivariate-datenanalyse.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#voraussetzungen"><i class="fa fa-check"></i><b>0.1</b> Voraussetzungen</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#warum-r"><i class="fa fa-check"></i><b>0.2</b> Warum R?</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#was-ist-r"><i class="fa fa-check"></i><b>0.3</b> Was ist R?</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#aller-einstieg-ist-schwer"><i class="fa fa-check"></i><b>0.4</b> Aller Einstieg ist schwer?!</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#typographie"><i class="fa fa-check"></i><b>0.5</b> Typographie</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#weiterführende-literatur"><i class="fa fa-check"></i><b>0.6</b> Weiterführende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>1</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="rstudio.html"><a href="rstudio.html#benutzeroberfläche"><i class="fa fa-check"></i><b>1.1</b> Benutzeroberfläche</a></li>
<li class="chapter" data-level="1.2" data-path="rstudio.html"><a href="rstudio.html#optionen"><i class="fa fa-check"></i><b>1.2</b> Optionen</a></li>
<li class="chapter" data-level="1.3" data-path="rstudio.html"><a href="rstudio.html#konsole"><i class="fa fa-check"></i><b>1.3</b> Konsole</a></li>
<li class="chapter" data-level="1.4" data-path="rstudio.html"><a href="rstudio.html#environment-und-history"><i class="fa fa-check"></i><b>1.4</b> Environment und History</a></li>
<li class="chapter" data-level="1.5" data-path="rstudio.html"><a href="rstudio.html#files"><i class="fa fa-check"></i><b>1.5</b> Files</a></li>
<li class="chapter" data-level="1.6" data-path="rstudio.html"><a href="rstudio.html#packages"><i class="fa fa-check"></i><b>1.6</b> Packages</a></li>
<li class="chapter" data-level="1.7" data-path="rstudio.html"><a href="rstudio.html#help"><i class="fa fa-check"></i><b>1.7</b> Help</a></li>
<li class="chapter" data-level="1.8" data-path="rstudio.html"><a href="rstudio.html#arbeiten-mit-rstudio"><i class="fa fa-check"></i><b>1.8</b> Arbeiten mit RStudio</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="rstudio.html"><a href="rstudio.html#projects"><i class="fa fa-check"></i><b>1.8.1</b> Projects</a></li>
<li class="chapter" data-level="1.8.2" data-path="rstudio.html"><a href="rstudio.html#konsole-oder-rscript"><i class="fa fa-check"></i><b>1.8.2</b> Konsole oder RScript?</a></li>
<li class="chapter" data-level="1.8.3" data-path="rstudio.html"><a href="rstudio.html#tab-completion"><i class="fa fa-check"></i><b>1.8.3</b> Tab completion</a></li>
<li class="chapter" data-level="1.8.4" data-path="rstudio.html"><a href="rstudio.html#nützliche-tastenbefehle-shortcuts"><i class="fa fa-check"></i><b>1.8.4</b> Nützliche Tastenbefehle (Shortcuts)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html"><i class="fa fa-check"></i><b>2</b> Programmiersprache R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#variablen-definieren"><i class="fa fa-check"></i><b>2.1</b> Variablen definieren</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#variablennamen"><i class="fa fa-check"></i><b>2.1.1</b> Variablennamen</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#funktionen-aufrufen"><i class="fa fa-check"></i><b>2.2</b> Funktionen aufrufen</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#verschachtelung-von-funktionen"><i class="fa fa-check"></i><b>2.2.1</b> Verschachtelung von Funktionen</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#objekte-und-datentypen"><i class="fa fa-check"></i><b>2.3</b> Objekte und Datentypen</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#vektoren-vector"><i class="fa fa-check"></i><b>2.3.1</b> Vektoren (vector)</a></li>
<li class="chapter" data-level="2.3.2" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#faktoren-factor"><i class="fa fa-check"></i><b>2.3.2</b> Faktoren (factor)</a></li>
<li class="chapter" data-level="2.3.3" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#datensatz-data-frame"><i class="fa fa-check"></i><b>2.3.3</b> Datensatz (data frame)</a></li>
<li class="chapter" data-level="2.3.4" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#listen-list"><i class="fa fa-check"></i><b>2.3.4</b> Listen (list)</a></li>
<li class="chapter" data-level="2.3.5" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#weitere-datentypen"><i class="fa fa-check"></i><b>2.3.5</b> Weitere Datentypen</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#pipe-operatoren"><i class="fa fa-check"></i><b>2.4</b> Pipe Operatoren</a>
<ul>
<li><a href="programmiersprache-r.html#operator"><code>%&gt;% Operator</code></a></li>
<li><a href="programmiersprache-r.html#operator-1"><code>%$% Operator</code></a></li>
<li><a href="programmiersprache-r.html#t-operator"><code>%T&gt;% Operator</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html"><i class="fa fa-check"></i><b>3</b> Datenverarbeitung</a>
<ul>
<li class="chapter" data-level="3.1" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#vorbereitung"><i class="fa fa-check"></i><b>3.1</b> Vorbereitung</a></li>
<li class="chapter" data-level="3.2" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#datensatz-importieren"><i class="fa fa-check"></i><b>3.2</b> Datensatz importieren</a></li>
<li class="chapter" data-level="3.3" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#erster-blick-auf-den-datensatz"><i class="fa fa-check"></i><b>3.3</b> Erster Blick auf den Datensatz</a></li>
<li class="chapter" data-level="3.4" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#datensatz-restrukturieren"><i class="fa fa-check"></i><b>3.4</b> Datensatz restrukturieren</a>
<ul>
<li><a href="datenverarbeitung.html#select"><code>Select()</code></a></li>
<li><a href="datenverarbeitung.html#filter"><code>Filter()</code></a></li>
<li><a href="datenverarbeitung.html#arrange"><code>Arrange()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#daten-konvertieren"><i class="fa fa-check"></i><b>3.5</b> Daten konvertieren</a>
<ul>
<li><a href="datenverarbeitung.html#to_factor"><code>To_factor()</code></a></li>
<li><a href="datenverarbeitung.html#to_label"><code>To_label()</code></a></li>
<li><a href="datenverarbeitung.html#to_numeric"><code>To_numeric()</code></a></li>
<li><a href="datenverarbeitung.html#to_character"><code>To_character()</code></a></li>
<li><a href="datenverarbeitung.html#numeric_to_factor"><code>Numeric_to_factor()</code></a></li>
<li><a href="datenverarbeitung.html#unlabel"><code>Unlabel()</code></a></li>
<li><a href="datenverarbeitung.html#ref_lvl"><code>Ref_lvl()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#daten-beschriften"><i class="fa fa-check"></i><b>3.6</b> Daten beschriften</a>
<ul>
<li><a href="datenverarbeitung.html#get_label"><code>Get_label()</code></a></li>
<li><a href="datenverarbeitung.html#get_labels"><code>Get_labels()</code></a></li>
<li><a href="datenverarbeitung.html#remove_label"><code>Remove_label()</code></a></li>
<li><a href="datenverarbeitung.html#remove_labels"><code>Remove_labels()</code></a></li>
<li><a href="datenverarbeitung.html#remove_all_labels"><code>Remove_all_labels()</code></a></li>
<li><a href="datenverarbeitung.html#var_labels"><code>Var_labels()</code></a></li>
<li><a href="datenverarbeitung.html#val_labels"><code>Val_labels()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#daten-manipulieren"><i class="fa fa-check"></i><b>3.7</b> Daten manipulieren</a>
<ul>
<li><a href="datenverarbeitung.html#rename"><code>Rename()</code></a></li>
<li><a href="datenverarbeitung.html#mutate"><code>Mutate()</code></a></li>
<li><a href="datenverarbeitung.html#group_by"><code>Group_by()</code></a></li>
<li><a href="datenverarbeitung.html#summarise"><code>Summarise()</code></a></li>
<li><a href="datenverarbeitung.html#distinct"><code>Distinct()</code></a></li>
<li><a href="datenverarbeitung.html#case_when"><code>Case_when()</code></a></li>
<li><a href="datenverarbeitung.html#rec"><code>Rec()</code></a></li>
<li><a href="datenverarbeitung.html#std"><code>Std()</code></a></li>
<li><a href="datenverarbeitung.html#center"><code>Center()</code></a></li>
<li><a href="datenverarbeitung.html#split_var"><code>Split_var()</code></a></li>
<li><a href="datenverarbeitung.html#group_var"><code>Group_var()</code></a></li>
<li><a href="datenverarbeitung.html#row_count"><code>Row_count()</code></a></li>
<li><a href="datenverarbeitung.html#row_sums"><code>Row_sums()</code></a></li>
<li><a href="datenverarbeitung.html#row_means"><code>Row_means()</code></a></li>
<li><a href="datenverarbeitung.html#set_na"><code>Set_na()</code></a></li>
<li><a href="datenverarbeitung.html#drop_na"><code>Drop_na()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="uni--und-bivariate-datenanalyse.html"><a href="uni--und-bivariate-datenanalyse.html"><i class="fa fa-check"></i><b>4</b> Uni- und Bivariate Datenanalyse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="uni--und-bivariate-datenanalyse.html"><a href="uni--und-bivariate-datenanalyse.html#gewichtung"><i class="fa fa-check"></i><b>4.1</b> Gewichtung</a></li>
<li class="chapter" data-level="4.2" data-path="uni--und-bivariate-datenanalyse.html"><a href="uni--und-bivariate-datenanalyse.html#univariate-statistiken"><i class="fa fa-check"></i><b>4.2</b> Univariate Statistiken</a>
<ul>
<li><a href="uni--und-bivariate-datenanalyse.html#frq"><code>Frq()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#descr"><code>Descr()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_mean"><code>Weighted_mean()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_median"><code>Weighted_median()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_sd"><code>Weighted_sd()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_se"><code>Weighted_se()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#wtd.quantile"><code>wtd.quantile()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="uni--und-bivariate-datenanalyse.html"><a href="uni--und-bivariate-datenanalyse.html#bivariate-statistiken"><i class="fa fa-check"></i><b>4.3</b> Bivariate Statistiken</a>
<ul>
<li><a href="uni--und-bivariate-datenanalyse.html#crosstab"><code>Crosstab()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_chisqtest"><code>Weighted_chisqtest()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#crosstable_statistiscs"><code>Crosstable_statistiscs()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_correlation"><code>Weighted_correlation()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="uni--und-bivariate-datenanalyse.html"><a href="uni--und-bivariate-datenanalyse.html#mittelwertvergleiche-unabhängig"><i class="fa fa-check"></i><b>4.4</b> Mittelwertvergleiche (unabhängig)</a>
<ul>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_ttest"><code>Weighted_ttest()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#grpmean"><code>Grpmean()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#weighted_mannwhitney"><code>Weighted_mannwhitney()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="uni--und-bivariate-datenanalyse.html"><a href="uni--und-bivariate-datenanalyse.html#grafiken"><i class="fa fa-check"></i><b>4.5</b> Grafiken</a>
<ul>
<li><a href="uni--und-bivariate-datenanalyse.html#plot_frq"><code>Plot_frq()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#plot_likert"><code>Plot_likert()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#plot_stackfrq"><code>Plot_stackfrq()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#plot_grpfrq"><code>Plot_grpfrq()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#plot_xtab"><code>Plot_xtab()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#grid.arrange"><code>Grid.arrange()</code></a></li>
<li><a href="uni--und-bivariate-datenanalyse.html#ggsave"><code>Ggsave()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-datenanalyse.html"><a href="multivariate-datenanalyse.html"><i class="fa fa-check"></i><b>5</b> Multivariate Datenanalyse</a>
<ul>
<li class="chapter" data-level="5.1" data-path="multivariate-datenanalyse.html"><a href="multivariate-datenanalyse.html#korrelationsmatrix"><i class="fa fa-check"></i><b>5.1</b> Korrelationsmatrix</a>
<ul>
<li><a href="multivariate-datenanalyse.html#wtd.cor"><code>Wtd.cor()</code></a></li>
<li><a href="multivariate-datenanalyse.html#corrplot"><code>Corrplot()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="multivariate-datenanalyse.html"><a href="multivariate-datenanalyse.html#explorative-faktoranalyse-und-hauptkomponentenanalyse"><i class="fa fa-check"></i><b>5.2</b> Explorative Faktoranalyse und Hauptkomponentenanalyse</a>
<ul>
<li><a href="multivariate-datenanalyse.html#kmo"><code>KMO()</code></a></li>
<li><a href="multivariate-datenanalyse.html#bartlett.test"><code>Bartlett.test()</code></a></li>
<li><a href="multivariate-datenanalyse.html#scree"><code>Scree()</code></a></li>
<li><a href="multivariate-datenanalyse.html#principal"><code>Principal()</code></a></li>
<li><a href="multivariate-datenanalyse.html#fa"><code>Fa()</code></a></li>
<li><a href="multivariate-datenanalyse.html#fa.diagram"><code>Fa.diagram()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="multivariate-datenanalyse.html"><a href="multivariate-datenanalyse.html#konfirmatorische-faktorenanalyse"><i class="fa fa-check"></i><b>5.3</b> Konfirmatorische Faktorenanalyse</a>
<ul>
<li><a href="multivariate-datenanalyse.html#cfa"><code>Cfa()</code></a></li>
<li><a href="multivariate-datenanalyse.html#sempaths"><code>semPaths()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="multivariate-datenanalyse.html"><a href="multivariate-datenanalyse.html#realiabilitätsanalyse"><i class="fa fa-check"></i><b>5.4</b> Realiabilitätsanalyse</a>
<ul>
<li><a href="multivariate-datenanalyse.html#reliability"><code>reliability()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="multivariate-datenanalyse.html"><a href="multivariate-datenanalyse.html#regressionsanalyse"><i class="fa fa-check"></i><b>5.5</b> Regressionsanalyse</a>
<ul>
<li><a href="multivariate-datenanalyse.html#lm"><code>Lm()</code></a></li>
<li><a href="multivariate-datenanalyse.html#model_parameters"><code>Model_parameters()</code></a></li>
<li><a href="multivariate-datenanalyse.html#anova"><code>Anova()</code></a></li>
<li><a href="multivariate-datenanalyse.html#model_performance"><code>Model_performance()</code></a></li>
<li><a href="multivariate-datenanalyse.html#compare_performance"><code>Compare_performance()</code></a></li>
<li><a href="multivariate-datenanalyse.html#screenreg"><code>Screenreg()</code></a></li>
<li><a href="multivariate-datenanalyse.html#plot_model"><code>Plot_model()</code></a></li>
<li><a href="multivariate-datenanalyse.html#plot_models"><code>Plot_models()</code></a></li>
<li><a href="multivariate-datenanalyse.html#check_model"><code>Check_model()</code></a></li>
<li><a href="multivariate-datenanalyse.html#glm"><code>Glm()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html"><i class="fa fa-check"></i><b>6</b> Grafiken erstellen</a>
<ul>
<li class="chapter" data-level="6.1" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#schritt-1-plot-objekt-erstellen"><i class="fa fa-check"></i><b>6.1</b> Schritt 1: Plot-Objekt erstellen</a></li>
<li class="chapter" data-level="6.2" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#schritt-2-aesthetic-mapping"><i class="fa fa-check"></i><b>6.2</b> Schritt 2: Aesthetic mapping</a></li>
<li class="chapter" data-level="6.3" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#schritt-3-schichten-layer-hinzufügen"><i class="fa fa-check"></i><b>6.3</b> Schritt 3: Schichten (“Layer”) hinzufügen</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#punktdiagramm"><i class="fa fa-check"></i><b>6.3.1</b> Punktdiagramm</a></li>
<li class="chapter" data-level="6.3.2" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#zentrale-tendenz-und-streuung-abbilden"><i class="fa fa-check"></i><b>6.3.2</b> Zentrale Tendenz und Streuung abbilden</a></li>
<li class="chapter" data-level="6.3.3" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#mehrere-schichten-kombinieren"><i class="fa fa-check"></i><b>6.3.3</b> Mehrere Schichten kombinieren</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#verschiedene-grafiken-für-verschiedene-datentypen"><i class="fa fa-check"></i><b>6.4</b> Verschiedene Grafiken für verschiedene Datentypen</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#eine-variable"><i class="fa fa-check"></i><b>6.4.1</b> Eine Variable</a></li>
<li class="chapter" data-level="6.4.2" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#zwei-variablen"><i class="fa fa-check"></i><b>6.4.2</b> Zwei Variablen</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="grafiken-erstellen.html"><a href="grafiken-erstellen.html#facets"><i class="fa fa-check"></i><b>6.5</b> Facets</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Workshop - Sozialwissenschaften</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="grafiken-erstellen" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Grafiken erstellen</h1>
<p>In diesem Kapitel werden wir lernen, welche Werkzeuge uns R zur Erstellung von Grafiken zur Verfügung stellt und
wie uns das Paket <code>ggplot2</code> aus dem <code>tidyverse</code> ermöglicht durch explorative Datenanalyse verborgene Zusammenhänge zu entdecken, sowie
Resultate darzustellen und zu kommunizieren.</p>
<p>Im Gegensatz zum ursprünglichen Grafiksystem <code>R Base Graphics</code>, welches auf <code>Base R</code> aufsetzt, basiert <code>ggplot2</code> auf der intuitiven Syntax
<code>Grammar of Graphics</code>. Hiermit lassen sich durch eleganten, flexiblen und konsistenten Code sehr komplexe Grafiken erstellen und nahtlos mit den
Funktionen des <code>tidyverse</code> verbinden.</p>
<p>Achtung! <code>ggplot2</code> benötigt Datensätze im <em>long</em> Format. (siehe hierzu: <a href="https://r4ds.had.co.nz/tidy-data.html">R for Data Science - Tidy Data</a>)</p>
<p>Da Grafiken mit <code>ggplot2</code> immer nach dem gleichen Prinzip erstellt werden, ergeben sich immer folgende Schritte:</p>
<p><strong>Schritt 1:</strong> Erstellung eines Objekts mit der Funktion <code>ggplot()</code>.</p>
<p><strong>Schritt 2:</strong> Definition der Datengrundlage mit dem ersten Argument <code>data = datensatz</code>.</p>
<p><strong>Schritt 3:</strong> Definition von “aesthetic mappings,” also der Wahl einer Variable für die x-Achse: <code>x = var1</code>, y-Achse: <code>y = var2</code>,
Gewichtung: <code>weight = gewicht</code> und zur Gruppierung der Daten: <code>group bzw. colour, shape, linetype oder fill = var3</code> über die Funktion <code>mapping = aes()</code>.</p>
<p><strong>Schritt 4:</strong> Definition verschiedener “Layer” bzw. “Schichten.” Hierbei definieren wir, was dargestellt werden soll - z.B. ein Histogramm oder Linien.
Dabei wird uns in der Anzahl an Schichten kein Limit gesetzt. Die Funktionen beginnen dabei immer mit dem Präfix <code>geom_</code>, z.B. <code>geom_bar()</code> und werden über den
Operator <code>+</code> hinzugefügt.</p>
<p>Im Verlauf des Kapitels werden wir die einzelnen Schritte noch einmal vertiefen, gleichwohl wollen wir mit eingängigen Beispiel beginnen.</p>
<p><strong>Beispiel 1:</strong></p>
<p>Grundlage unserer Grafik und damit erstes Argument der Funktion <code>ggplot()</code> ist der <code>allbus2018</code>. Aufbauend definieren wir in der Funktion <code>aes()</code>, welche Variablen in unserer Grafik auf welcher Achse abgebildet werden sollen. Da wir lediglich eine Abbildung der Häufigkeitsverteilung der Variable <code>im19</code> anstreben, müssen wir nur das Argument <code>x =</code> spezifizieren. Anschließend wird über das Argument <code>weight =</code> eine Gewichtung vorgenommen. Damit haben wir unser Fundament gelegt. Über den Operator <code>+</code> fügen wir nun weitere Schichte hinzu. Als erstes “Layer” fügen wir über die Funktion <code>geom_bar</code> das gewünschte Balkendiagramm hinzu. Die Funktion führt dabei voreingestellt über das Argument <code>stat = "count"</code> einen Zählbefehl aus, welcher uns in Folge die Häufigkeitswerte der einzelnen Ausprägungen ausgibt. Als weitere Argumente definieren wir noch die Farbe der Balken mit <code>fill =</code> und das Auslassen fehlender Werte über `<code>. Als Endpunkt fügen wir noch eine zweite Schicht hinzu, die uns mit der Funktion</code>labs()` ermöglicht alle Achsen frei zu Beschriften. Fertig!</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="grafiken-erstellen.html#cb225-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb225-2"><a href="grafiken-erstellen.html#cb225-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(im19) <span class="sc">%&gt;%</span> </span>
<span id="cb225-3"><a href="grafiken-erstellen.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> im19, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb225-4"><a href="grafiken-erstellen.html#cb225-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">&quot;steelblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb225-5"><a href="grafiken-erstellen.html#cb225-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Anzahl&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Häufigkeitsverteilung der Variable im19&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-157-1.png" width="672" /></p>
<p>Die folgende Grafik erweitert unsere Fähigkeiten zusätzlich um vier Punkte. Durch die nahtlose Integration der Funktionen des <code>tidyverse</code> und <code>strengejacke</code> ist es uns möglich innerhalb eines Objekts sowohl die Daten zu manipulieren, als auch diese in die nachfolgende Grafik einzubeziehen. So war es in unserem Beispiel von Nöten die Grupperungsvariable <code>sex</code> (Geschlecht) erst zu einem Faktor zu konvertieren, um sie nachstehend nutzen zu können - Funktion <code>to_label()</code>. Weiterhin haben wir das Nettoeinkommen der Befragten mit dem Argument <code>y =</code> auf der y-Achse abgebildet und das Geschlecht der Befragten über das Argument <code>colour =</code> als Gruppierungvariable gewählt. Damit erlaubt uns <code>ggplot()</code> die einzelnen Datenpunkte farblich hervorzuheben, sowie über die Funktion <code>stat_summary()</code> einen Mittelwertvergleich zwischen beiden Gruppen über ein Liniendiagramm abzubilden.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="grafiken-erstellen.html#cb226-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb226-2"><a href="grafiken-erstellen.html#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb226-3"><a href="grafiken-erstellen.html#cb226-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, inc, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb226-4"><a href="grafiken-erstellen.html#cb226-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> inc, <span class="at">colour =</span> sex, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb226-5"><a href="grafiken-erstellen.html#cb226-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb226-6"><a href="grafiken-erstellen.html#cb226-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, <span class="at">size =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb226-7"><a href="grafiken-erstellen.html#cb226-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Alter&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Einkommen&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;Geschlecht&quot;</span>, </span>
<span id="cb226-8"><a href="grafiken-erstellen.html#cb226-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Mittleres Einkommen nach Alter und Geschlecht&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-158-1.png" width="672" /></p>
<p>Nun wollen wir uns die einzelnen Schritte nochmal im Detail ansehen.</p>
<div id="schritt-1-plot-objekt-erstellen" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Schritt 1: Plot-Objekt erstellen</h2>
<p><img src="Bilder/ggplot-Funktion.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Wir beginnen mit einem Datensatz und erstellen ein Plot-Objekt mit der Funktion <code>ggplot()</code>. Als erstes Argument fügen wir unseren Datensatz ein <code>data = datensatz</code>. Hierbei bestehen zwei Möglichkeiten der Umsetzung.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="grafiken-erstellen.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ohne Pipe</span></span>
<span id="cb227-2"><a href="grafiken-erstellen.html#cb227-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> allbus2018)</span>
<span id="cb227-3"><a href="grafiken-erstellen.html#cb227-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-4"><a href="grafiken-erstellen.html#cb227-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mit Pipe</span></span>
<span id="cb227-5"><a href="grafiken-erstellen.html#cb227-5" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb227-6"><a href="grafiken-erstellen.html#cb227-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()</span></code></pre></div>
</div>
<div id="schritt-2-aesthetic-mapping" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Schritt 2: Aesthetic mapping</h2>
<p>Im zweiten Schritt definieren wir das zweite Argument <code>mapping =</code> über die Funktion <code>aes()</code> - “aesthetic mappings.” Damit bestimmen wir welche Variablen benutzt werden sollen, um die Daten darzustellen. Im Folgenden wollen wir ergründen, inwieweit das Geschlecht der Befragten einen Einfluss auf ihr individuelles Nettoeinkommen <code>(inc)</code> hat. So definieren wir <code>sex</code> als Variable auf der x-Achse mit <code>x = sex</code> und die Variable <code>inc</code> mit <code>y = inc</code> auf der y-Achse. Da wir Gesamtdeutschland betrachten wollen, definieren wir noch mit <code>weight = wghtpew</code> das nötige Designgewicht. Der vorläufiger Befehl lautet entsprechend: <code>mapping = aes(x = sex, y = im21, weight = wghtpew)</code>.
Zusätzlich erlaubt die Funktion <code>aes()</code> weitere Anpassungen über <code>fill =</code>, <code>colour =</code>, <code>shape =</code>, <code>linetype =</code> und <code>group =</code>. Diese Argumente helfen zum Einen der Gruppierungsvariable auf der x-Achse eine Farbe, Form oder Zugehörigkeit zuzuweisen, zum Anderen lässt sich damit aber auch eine dritte Variable <code>(z)</code> als Gruppierungsvariable (siehe Beispiel 2) zuweisen.</p>
<p>In unserem Beispiel wollen wir, dass die beiden Ausprägungsmerkmale von Geschlecht verschiedene Farben zugewiesen bekommen und die nachfolgenden Objekte entsprechend ausgefülllt werden. Der fertige Befehl lautet damit: <code>mapping = aes(x = sex, y = inc, weight = wghtpew, fill = sex, colour = sex)</code>. Das Argument <code>colour =</code> ist folglich ein Attribut für Linien und Punkte; das Argument <code>fill =</code> ist ein Attribut für Flächen.</p>
<p><strong>Wichtig!</strong> Wenn wir die Funktion <code>aes()</code> innerhalb der Funktion <code>ggplot()</code> definieren, gelten sie für alle Schichten, d.h. für alle Elemente der Grafik. Wir können später die “mappings” auch für jede Schicht einzeln definieren und damit auf verschiedene Datensätze zugreifen, oder andere Variablen verwenden.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="grafiken-erstellen.html#cb228-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb228-2"><a href="grafiken-erstellen.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb228-3"><a href="grafiken-erstellen.html#cb228-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb228-4"><a href="grafiken-erstellen.html#cb228-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb228-5"><a href="grafiken-erstellen.html#cb228-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> sex,</span>
<span id="cb228-6"><a href="grafiken-erstellen.html#cb228-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> inc,</span>
<span id="cb228-7"><a href="grafiken-erstellen.html#cb228-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> wghtpew,</span>
<span id="cb228-8"><a href="grafiken-erstellen.html#cb228-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> sex,</span>
<span id="cb228-9"><a href="grafiken-erstellen.html#cb228-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> sex</span>
<span id="cb228-10"><a href="grafiken-erstellen.html#cb228-10" aria-hidden="true" tabindex="-1"></a>    ))</span></code></pre></div>
<p><code>g</code> ist damit ein “leeres” Plot-Objekt, dass noch nichts anzeigt, da wir noch keine “Layer” definiert haben. Das Objekt ist damit ein <code>ggplot2</code>-Objekt, welches im R-Studio Fenster <code>Plots</code> ausgegeben werden kann. Wir sehen folglich ein Grafikgerüst mit der richtigen Achsenzuweisung.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="grafiken-erstellen.html#cb229-1" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-162-1.png" width="672" /></p>
</div>
<div id="schritt-3-schichten-layer-hinzufügen" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Schritt 3: Schichten (“Layer”) hinzufügen</h2>
<p>Dem Plot-Objekt <code>g</code> wollen wir nun mit den Funktionstypen <code>geom_</code> weitere Schichten beifügen. So addieren wir mit dem <code>+</code> Operator einfach ein weiteres “Layer” - <code>g + geom_</code>.</p>
<div id="punktdiagramm" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Punktdiagramm</h3>
<p>Als erstes möchten wir die einzelnen Beobachtungen als Datenpunkte abgetragen haben. Hierbei können wir entweder unsere Ausgangssytax optimieren, oder das Objekt <code>g</code> einfach erweitern.</p>
<p><strong>Anmerkung:</strong> Mit dem Argument `` werden fehlende Werte in den Schichten außen vor gelassen und wir verhindern eine Warnmeldung.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="grafiken-erstellen.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ausgangssyntax optimieren</span></span>
<span id="cb230-2"><a href="grafiken-erstellen.html#cb230-2" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb230-3"><a href="grafiken-erstellen.html#cb230-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb230-4"><a href="grafiken-erstellen.html#cb230-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb230-5"><a href="grafiken-erstellen.html#cb230-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> inc, <span class="at">weight =</span> wghtpew, <span class="at">fill =</span> sex, <span class="at">colour =</span> sex)) <span class="sc">+</span></span>
<span id="cb230-6"><a href="grafiken-erstellen.html#cb230-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="grafiken-erstellen.html#cb231-1" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb231-2"><a href="grafiken-erstellen.html#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Objekt erweitern</span></span>
<span id="cb231-3"><a href="grafiken-erstellen.html#cb231-3" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb231-4"><a href="grafiken-erstellen.html#cb231-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-163-2.png" width="672" /></p>
<p>Wollen wir das Überlagern der Datenpunkte (overplotting) verhindern, können wir auch auf die Funktion <code>geom_jitter()</code> zurückgreifen. In Anwendung werden uns die Punkte nebeneinander gezeigt.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="grafiken-erstellen.html#cb232-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb232-2"><a href="grafiken-erstellen.html#cb232-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-164-1.png" width="672" /></p>
<p>Mit dem Argument <code>width =</code> können wir zusätzlich bestimmen, wie breit die Streuung der Punkte sein soll.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="grafiken-erstellen.html#cb233-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb233-2"><a href="grafiken-erstellen.html#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.5</span>, )</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-165-1.png" width="672" /></p>
<p>Weitere Argumente sind <code>size =</code> für die größe der Punkte und <code>alpha =</code> zur Bestimmung der Transparenz. Zudem lassen sich wie gehabt im Fenster <code>Help</code> über den Befehl <code>?geom_jitter</code> in der Konsole weitere Argumente einsehen.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="grafiken-erstellen.html#cb234-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb234-2"><a href="grafiken-erstellen.html#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, )</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-166-1.png" width="672" /></p>
</div>
<div id="zentrale-tendenz-und-streuung-abbilden" class="section level3" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Zentrale Tendenz und Streuung abbilden</h3>
<p>Zur Darstellung der zentralen Tendenz und Streuung gibt uns <code>ggplot2</code> zusätzliche Schichten an die Hand. Genannt seien hier <code>geom_boxplot()</code> zur Darstellung von Boxplot-Diagrammen und <code>geom_violin()</code> für Violin-Diagramme.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="grafiken-erstellen.html#cb235-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb235-2"><a href="grafiken-erstellen.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-167-1.png" width="672" /></p>
<p>In einem Boxplot wird der Median abgetragen, d.h. das Rechteck repräsentiert die mittleren 50% und die Striche (“whiskers”) zeigen den 1,5 * IQR (Interquantilbereich). Die einzelnen Punkte stellen Ausreisser dar.</p>
<p>Wollen wir den Median sehen, müssen wir das Argument <code>fill = sex</code> weglassen.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="grafiken-erstellen.html#cb236-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb236-2"><a href="grafiken-erstellen.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb236-3"><a href="grafiken-erstellen.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb236-4"><a href="grafiken-erstellen.html#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sex,</span>
<span id="cb236-5"><a href="grafiken-erstellen.html#cb236-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> inc,</span>
<span id="cb236-6"><a href="grafiken-erstellen.html#cb236-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">weight =</span> wghtpew,</span>
<span id="cb236-7"><a href="grafiken-erstellen.html#cb236-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">colour =</span> sex))</span>
<span id="cb236-8"><a href="grafiken-erstellen.html#cb236-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-9"><a href="grafiken-erstellen.html#cb236-9" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb236-10"><a href="grafiken-erstellen.html#cb236-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-168-1.png" width="672" /></p>
<p>Violin-Diagramme sind Boxplot-Diagrammen sehr ähnlichen, wenngleich sie nicht die Quantile, sondern ein “kernel density estimate” zeigen - d.h. eine Abbildung der Kerndichte. Hier bietet sich das Argument <code>fill = sex</code> zudem ideal an.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="grafiken-erstellen.html#cb237-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb237-2"><a href="grafiken-erstellen.html#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb237-3"><a href="grafiken-erstellen.html#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb237-4"><a href="grafiken-erstellen.html#cb237-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sex,</span>
<span id="cb237-5"><a href="grafiken-erstellen.html#cb237-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> inc,</span>
<span id="cb237-6"><a href="grafiken-erstellen.html#cb237-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">weight =</span> wghtpew,</span>
<span id="cb237-7"><a href="grafiken-erstellen.html#cb237-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> sex))</span>
<span id="cb237-8"><a href="grafiken-erstellen.html#cb237-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-9"><a href="grafiken-erstellen.html#cb237-9" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb237-10"><a href="grafiken-erstellen.html#cb237-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-169-1.png" width="672" /></p>
<p>Stellen wir fest, dass die Farbgebung immer wieder neu angepasst werden muss, sollten wir das mapping entsprechend anpassen.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="grafiken-erstellen.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ausgang</span></span>
<span id="cb238-2"><a href="grafiken-erstellen.html#cb238-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb238-3"><a href="grafiken-erstellen.html#cb238-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb238-4"><a href="grafiken-erstellen.html#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb238-5"><a href="grafiken-erstellen.html#cb238-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> sex,</span>
<span id="cb238-6"><a href="grafiken-erstellen.html#cb238-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> inc,</span>
<span id="cb238-7"><a href="grafiken-erstellen.html#cb238-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">weight =</span> wghtpew))</span></code></pre></div>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="grafiken-erstellen.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb239-2"><a href="grafiken-erstellen.html#cb239-2" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb239-3"><a href="grafiken-erstellen.html#cb239-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">colour =</span> sex), )</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-171-1.png" width="672" /></p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="grafiken-erstellen.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin</span></span>
<span id="cb240-2"><a href="grafiken-erstellen.html#cb240-2" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb240-3"><a href="grafiken-erstellen.html#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex), )</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-172-1.png" width="672" /></p>
</div>
<div id="mehrere-schichten-kombinieren" class="section level3" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Mehrere Schichten kombinieren</h3>
<p>So ist es uns auch möglich mehrere “Layer” zu kombinieren. So müssen wir lediglich mehrere <code>geom_</code> Funktionen mit dem <code>+</code> Operator verbinden:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="grafiken-erstellen.html#cb241-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span></span>
<span id="cb241-2"><a href="grafiken-erstellen.html#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex), ) <span class="sc">+</span></span>
<span id="cb241-3"><a href="grafiken-erstellen.html#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">colour =</span> sex), <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">width =</span> <span class="fl">0.4</span>, )</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-173-1.png" width="672" /></p>
</div>
</div>
<div id="verschiedene-grafiken-für-verschiedene-datentypen" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Verschiedene Grafiken für verschiedene Datentypen</h2>
<p>In diesem Kapitel wollen wir uns eine Übersicht über die diversen <code>Geoms</code> in <code>ggplot2</code> für verschiedene Kombinationen von Variablen ansehen. So können wir entweder eine Variable auf der x-Achse oder y-Achse darstellen oder jeweils eine Variable auf der x-Achse und y-Achse. Diese Variablen können sowohl kontinuierlich (metrisch) oder kategorial (nominal/ordinal) sein.</p>
<p><strong>Wichtig!</strong> Wir können in diesem Kapitel nur eine spezifische Auswahl der möglichen <code>Geoms</code> betrachten, da <code>ggplot2</code> sehr umfangreich ist. Für eine umfassende Dokumentation aller Funktionen siehe: <a href="https://ggplot2.tidyverse.org/reference/">ggplot2 Dokumentation</a>. Unser Ziel ist lediglich eine Befähigung zum eigenverantwortlichen Arbeiten und Problemlösung herzustellen und den kreativen Prozess der Datenvisualisierung einzuleiten.</p>
<div id="eine-variable" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Eine Variable</h3>
<p>Sofern wir nur eine Variable auf der x-Achse abtragen möchten, müssen wir dennoch Werte auf der y-Achse definieren. In diesem Zusammenhang wird es sich mehrheitlich um z.B. Häufigkeitsverteilungen etc. handeln.</p>
<div id="kategoriale-variablen" class="section level4" number="6.4.1.1">
<h4><span class="header-section-number">6.4.1.1</span> Kategoriale Variablen</h4>
<p>Handelt es sich bei unserer Analyse um eine kategoriale Variable, dann verwenden wir oft einen <em>bar chart bzw. bar graph</em>. Hierbei wird die betreffende Variable anhand eines Rechtecks auf der x-Achse abgetragen, wobei es sich häufig um absolute bzw. relative Häufigkeitsverteilungen handelt. Die Funktion, die hierfür verwendet wird, heißt <code>geom_bar()</code>.</p>
<p>Als Beispiel ziehen wir die Alterskategorien der Befragten heran.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="grafiken-erstellen.html#cb242-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb242-2"><a href="grafiken-erstellen.html#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(agec) <span class="sc">%&gt;%</span> </span>
<span id="cb242-3"><a href="grafiken-erstellen.html#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(agec) <span class="sc">%&gt;%</span> </span>
<span id="cb242-4"><a href="grafiken-erstellen.html#cb242-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agec, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb242-5"><a href="grafiken-erstellen.html#cb242-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
<p><strong>Merke:</strong> Sofern wir <code>fill = "steelblue", colour = "red"</code> nicht innerhalb der <code>aes()</code> Funktion verwenden, dann handelt es sich nicht um Gruppierungsvariablen, sondern ausschließlich um Farbgebungen der Grafikobjekte. So färben wir mit <code>fill = "steelblue"</code> lediglich die Balken in Stahlblau ein. Eine Übersicht über die verschiedenen Farbvarianten erhalten wir mit der Funktion <code>colours()</code>. Es gibt 657, wenn gleich nur Zwanzig im folgenden Output dargestellt werden.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="grafiken-erstellen.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colours</span>() <span class="sc">%&gt;%</span> <span class="fu">sample</span>(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;grey90&quot;       &quot;firebrick1&quot;   &quot;mistyrose1&quot;   &quot;gray&quot;         &quot;navajowhite2&quot;
##  [6] &quot;indianred&quot;    &quot;gray93&quot;       &quot;maroon&quot;       &quot;darkkhaki&quot;    &quot;grey73&quot;      
## [11] &quot;gray66&quot;       &quot;orange&quot;       &quot;gray61&quot;       &quot;gray40&quot;       &quot;lightblue3&quot;  
## [16] &quot;skyblue3&quot;     &quot;gold&quot;         &quot;seashell4&quot;    &quot;gray31&quot;       &quot;grey16&quot;</code></pre>
<p>Im nächsten Schritt wollen wir unser Balkendiagramm nicht mit absoluten Werten ausgeben, sondern mit relativen Häufigkeiten. Hierzu ist es wichtig zu wissen, dass in der vorherigen Grafik ein entscheidendes Argument mit Standardwert eingegangen ist, das wir nun anpassen müssen. So fügen wir der vorherigen Grafik die Argumente <code>aes(y = ..count..)</code> hinzu. Wir definieren also auf der y-Achse eine Variable, die unmittelbar aus der x-Achse errechnet werden soll. Mit dem Befehl <code>..count..</code> handelt es sich um eine absolute Auszählung der Häufigkeiten. Wollen wir eine relative Häufigkeitsverteilung verwenden wir den Befehl <code>aes(y = ..prop..)</code>, also eine proportionale Auszählung. Zudem müssen wir noch definieren aus welcher bzw. wie vielen Gruppe/n die Werte relational geschöpft werden sollen. Dies geschieht über den Befehl <code>aes(y = ..prop.., group = 1)</code>. Damit werden die Werte relational bzw. proportinal aus einer Gruppe gebildet und bilden damit Prozentwerte zu 100% ab (die Darstellungsform auf der y-Achse lernen wir in den kommenden Kapiteln)</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="grafiken-erstellen.html#cb245-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb245-2"><a href="grafiken-erstellen.html#cb245-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(agec) <span class="sc">%&gt;%</span> </span>
<span id="cb245-3"><a href="grafiken-erstellen.html#cb245-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(agec) <span class="sc">%&gt;%</span> </span>
<span id="cb245-4"><a href="grafiken-erstellen.html#cb245-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agec, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb245-5"><a href="grafiken-erstellen.html#cb245-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..prop.., <span class="at">group =</span> <span class="dv">1</span>), <span class="at">fill =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>Weiterhin können wir zusätzliche Gruppierungvariablen angeben, anhand derer die Balken farblich kodiert werden. Im gewählten Beispiel: Geschlecht.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="grafiken-erstellen.html#cb246-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb246-2"><a href="grafiken-erstellen.html#cb246-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(agec, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb246-3"><a href="grafiken-erstellen.html#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(agec, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb246-4"><a href="grafiken-erstellen.html#cb246-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agec, <span class="at">weight =</span> wghtpew, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb246-5"><a href="grafiken-erstellen.html#cb246-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..prop.., <span class="at">group =</span> sex)) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
<p>Standardmäßig kreiert <code>ggplot2</code> einen <em>stacked</em> Bar Chart, die Balken werden also “gestapelt.” Wollen wir hingegen die Balken nebeneinander stehen sehen, können wir das Argument <code>position = "dodge"</code> verwenden.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="grafiken-erstellen.html#cb247-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb247-2"><a href="grafiken-erstellen.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(agec, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb247-3"><a href="grafiken-erstellen.html#cb247-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(agec, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb247-4"><a href="grafiken-erstellen.html#cb247-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agec, <span class="at">weight =</span> wghtpew, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb247-5"><a href="grafiken-erstellen.html#cb247-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..prop.., <span class="at">group =</span> sex), <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
<p>Kontinuierliche Variablen</p>
<p>Für kategoriale Variablen bieten sich eine Vielzahl von Grafikobjekten an. Beginnen möchten wir mit dem Histogramm, welches die Verteilung einer numerischen Variable idealen abträgt. Dazu werden die Werte einer Variable in diskrete Intervalle (<code>bins</code>) eingeteilt. Auf der y-Achse werden dazu, analog zu einem Bar Chart, die Häufigkeiten in den Intervallen abgebildet. Von besonderer Bedeutung ist hier die Bestimmung der Intervallgrößen (<code>binwidth</code>), da hierüber die Verteilung maßgeblich beeinflusst wird - die Grundeinstellung liegt bei <code>bins = 30</code>.</p>
<p>Hier ein Beispiel anhand der Altersverteilung in unserer Stichprobe mit den Grundeinstellungen.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="grafiken-erstellen.html#cb248-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb248-2"><a href="grafiken-erstellen.html#cb248-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb248-3"><a href="grafiken-erstellen.html#cb248-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb248-4"><a href="grafiken-erstellen.html#cb248-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<p>Wir bestimmen die <code>binwidth</code> selbst. Wir legen eine Altersspanne von 2 Jahren pro Balken fest - <code>binwidth = 1</code>.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="grafiken-erstellen.html#cb250-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb250-2"><a href="grafiken-erstellen.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb250-3"><a href="grafiken-erstellen.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb250-4"><a href="grafiken-erstellen.html#cb250-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
<p>Die Bestimmung der <code>binwidth</code> sollte natürlich immer von der Skala der Variable abhängen und damit weder zu fein noch zu grob ausfallen.</p>
<p>Im nächsten Schritt wollen wir auf der y-Achse die relativen Werte abgetragen sehen. Hierfür verwenden wir das Argument <code>aes(y = )</code> mit der zugehörigen Funktion <code>..density..</code>, damit <code>geom_histogram(aes(y = ..density..))</code>.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="grafiken-erstellen.html#cb251-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb251-2"><a href="grafiken-erstellen.html#cb251-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb251-3"><a href="grafiken-erstellen.html#cb251-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb251-4"><a href="grafiken-erstellen.html#cb251-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>Zudem lassen sich auch in Histogrammen Gruppierungsvariablen verwenden.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="grafiken-erstellen.html#cb252-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb252-2"><a href="grafiken-erstellen.html#cb252-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb252-3"><a href="grafiken-erstellen.html#cb252-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb252-4"><a href="grafiken-erstellen.html#cb252-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb252-5"><a href="grafiken-erstellen.html#cb252-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density.., <span class="at">fill =</span> sex), <span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<p>Wir können die Balken auch über das Argument <code>position =</code> übereinander legen mit <code>position = "identity"</code>.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="grafiken-erstellen.html#cb253-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb253-2"><a href="grafiken-erstellen.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb253-3"><a href="grafiken-erstellen.html#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb253-4"><a href="grafiken-erstellen.html#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb253-5"><a href="grafiken-erstellen.html#cb253-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density.., <span class="at">fill =</span> sex), <span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<p>Oder sie nebeneinander behalten <code>position = "dodge"</code>.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="grafiken-erstellen.html#cb254-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb254-2"><a href="grafiken-erstellen.html#cb254-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb254-3"><a href="grafiken-erstellen.html#cb254-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb254-4"><a href="grafiken-erstellen.html#cb254-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">weight =</span> wghtpew, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb254-5"><a href="grafiken-erstellen.html#cb254-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density.., <span class="at">fill =</span> sex), <span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
</div>
</div>
<div id="zwei-variablen" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Zwei Variablen</h3>
<p>Jetzt wollen wir zwei Variablen auf der x-Achse und y-Achse abbilden. Auch hier hängen die Möglichkeiten der <code>geoms</code> vom Datentyp der Variable ab.</p>
<div id="x-und-y-kategorial" class="section level4" number="6.4.2.1">
<h4><span class="header-section-number">6.4.2.1</span> X und Y kategorial</h4>
<p>Diese Konbination der Datentypen hält recht wenige Möglichkeiten der grafischen Aufbereitung bereit. Legitim ist in jedem Fall der grafische Abtrag der gemeinsamen Häufigkeiten. Hierfür gibt es die Funktion <code>geom_count()</code>.</p>
<p>Als interessantes Beispiel dient die gemeinsame Häufigkeit zwischen Alterskategorie und Bildungsabschluss.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="grafiken-erstellen.html#cb255-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb255-2"><a href="grafiken-erstellen.html#cb255-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(agec, educ) <span class="sc">%&gt;%</span> </span>
<span id="cb255-3"><a href="grafiken-erstellen.html#cb255-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(agec, educ) <span class="sc">%&gt;%</span> </span>
<span id="cb255-4"><a href="grafiken-erstellen.html#cb255-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agec =</span> <span class="fu">str_remove</span>(agec, <span class="st">&quot;JAHRE&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb255-5"><a href="grafiken-erstellen.html#cb255-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agec, <span class="at">y =</span> educ, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb255-6"><a href="grafiken-erstellen.html#cb255-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_count</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
<p>Die gemeinsamen Häufigkeiten werden durch <code>geom_count</code> vor allem über den Durchmesser der Punkte dargestellt (vgl. Funktion <code>crosstab()</code>).</p>
</div>
<div id="x-kategorial-und-y-kontinuierlich" class="section level4" number="6.4.2.2">
<h4><span class="header-section-number">6.4.2.2</span> X kategorial und Y kontinuierlich</h4>
<p>Wenn eine der Variablen kategorial ist, dann können wir diese statt als Gruppierungsvariable auf der x-Achse verwenden. Gute Beispiele waren hierfür die in Kapitel 6.3.2 gezeigten Box- und Violindiagramme. Zudem können wir auch die Funktion <code>geom_col()</code> für zwei Variablen nutzen. Diese Funktion ist eng mit <code>geom_bar()</code> verwandt, wenngleich sie keine Aggregation der Daten über <code>stat = "count"</code> vornimmt, sondern nativ zwei Variablen zulässt und als Grundeinstellung mit <code>stat = identity</code> arbeitet. Die Variable auf der y-Achse bildet entsprechend alle Beobachtungen in den Kategorien auf der x-Achse ab.</p>
<p>Als Beispiel dient uns das Geschlecht der Befragten und ihr individuelles Nettoeinkommen.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="grafiken-erstellen.html#cb256-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb256-2"><a href="grafiken-erstellen.html#cb256-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb256-3"><a href="grafiken-erstellen.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb256-4"><a href="grafiken-erstellen.html#cb256-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> inc, <span class="at">weight =</span> wghtpew, <span class="at">fill =</span> inc)) <span class="sc">+</span></span>
<span id="cb256-5"><a href="grafiken-erstellen.html#cb256-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-186-1.png" width="672" /></p>
</div>
<div id="x-und-y-kontinuierlich" class="section level4" number="6.4.2.3">
<h4><span class="header-section-number">6.4.2.3</span> X und Y kontinuierlich</h4>
<p><strong>Scatterplot</strong></p>
<p>Wenn beide Variablen kontinuierlich sind, haben wir eine ganze Reihe an Möglichkeiten der Zusammenhang zwischen beiden abzubilden. Nachstehend wollen wir uns exemplarisch mit der Darstellung eines “Scatterplots” und Liniendiagramms beschäftigen. Hierfür verwenden wir die Funktionen <code>geom_point()</code> bzw. <code>geom_line()</code>.</p>
<p>Als Beispiel wollen wir den Zusammenhang zwischen Alter und Arbeitsstunden pro Woche betrachten.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="grafiken-erstellen.html#cb257-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb257-2"><a href="grafiken-erstellen.html#cb257-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, dw15) <span class="sc">%&gt;%</span> </span>
<span id="cb257-3"><a href="grafiken-erstellen.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> dw15, <span class="at">weight =</span> wghtpew)) <span class="sc">+</span></span>
<span id="cb257-4"><a href="grafiken-erstellen.html#cb257-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-187-1.png" width="672" /></p>
<p>Im nächsten Schritt wollen wir die Daten grafisch aufbereiten und eine Gruppierungsvariable einbringen, um noch tiefer in die Zusammenhänge einzutauchen. Die Gruppierung nehmen wir hier wieder anhand des Geschlechts vor. Zudem passen wir die Größe über das Argument <code>size =</code> und die Transparenz über <code>alpha =</code> an. Auch die Form der Punkte kann bei der Visualisierung von Zusammenhängen wichtig sein. Diese passen wir über das Argument <code>shape =</code> in der Funktion <code>aes()</code> an.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="grafiken-erstellen.html#cb258-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb258-2"><a href="grafiken-erstellen.html#cb258-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb258-3"><a href="grafiken-erstellen.html#cb258-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, dw15, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb258-4"><a href="grafiken-erstellen.html#cb258-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> dw15, <span class="at">weight =</span> wghtpew, <span class="at">colour =</span> sex, <span class="at">shape =</span> sex)) <span class="sc">+</span></span>
<span id="cb258-5"><a href="grafiken-erstellen.html#cb258-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-188-1.png" width="672" /></p>
<p>Wir können unschwer ein auffächern der beiden Geschlechtergruppen hinsichtlich der wöchentlichen Arbeitszeit erkennen, die wir in einem zweiten Schritt durch eine Mittellinie verdeutlichen möchten. Hierfür nutzen wir die Funktion <code>stat_summary()</code>, die uns über ihre Argumente <code>fun =</code> für “function” und <code>geom =</code> die Zusammenfassung von Daten erlaubt.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="grafiken-erstellen.html#cb259-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb259-2"><a href="grafiken-erstellen.html#cb259-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb259-3"><a href="grafiken-erstellen.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, dw15, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb259-4"><a href="grafiken-erstellen.html#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> dw15, <span class="at">weight =</span> wghtpew, <span class="at">colour =</span> sex, <span class="at">shape =</span> sex)) <span class="sc">+</span></span>
<span id="cb259-5"><a href="grafiken-erstellen.html#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb259-6"><a href="grafiken-erstellen.html#cb259-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-189-1.png" width="672" /></p>
<p><strong>Liniendiagramm</strong></p>
<p>Mit der Funktion <code>geom_line()</code> könne wir auch Liniendiagramme bilden. Diese Funktion bietet sich vor allem bei aggregierten Daten an, da die sinnvolle Darstellung eines Liniendiagramms einen spezifischen y-Wert zu jedem x-Wert verlangt. Unter dieser Voraussetzung sind <code>geom_line()</code> und <code>stat_summary()</code> in ihrer Darstellung äquivalent.</p>
<p>Als Beispiel soll uns wieder der Zusammenhang zwischen Alter und wöchentlicher Arbeitszeit dienen.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="grafiken-erstellen.html#cb260-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb260-2"><a href="grafiken-erstellen.html#cb260-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb260-3"><a href="grafiken-erstellen.html#cb260-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb260-4"><a href="grafiken-erstellen.html#cb260-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">incm =</span> <span class="fu">weighted_mean</span>(inc, <span class="at">weights =</span> wghtpew)) <span class="sc">%&gt;%</span> </span>
<span id="cb260-5"><a href="grafiken-erstellen.html#cb260-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> incm)) <span class="sc">+</span></span>
<span id="cb260-6"><a href="grafiken-erstellen.html#cb260-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-190-1.png" width="672" /></p>
<p>Wir können den vorliegenden Graphen auch mit Punkten ergänzen und das Aussehen der Linie verändern.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="grafiken-erstellen.html#cb261-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb261-2"><a href="grafiken-erstellen.html#cb261-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, inc) <span class="sc">%&gt;%</span> </span>
<span id="cb261-3"><a href="grafiken-erstellen.html#cb261-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb261-4"><a href="grafiken-erstellen.html#cb261-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">incm =</span> <span class="fu">weighted_mean</span>(inc, <span class="at">weights =</span> wghtpew)) <span class="sc">%&gt;%</span> </span>
<span id="cb261-5"><a href="grafiken-erstellen.html#cb261-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> incm)) <span class="sc">+</span></span>
<span id="cb261-6"><a href="grafiken-erstellen.html#cb261-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb261-7"><a href="grafiken-erstellen.html#cb261-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-191-1.png" width="672" /></p>
<p><strong>Regression</strong></p>
<p>Abschließend können wir auch Regressionen innerhalb der Grafiken berechnen lassen.</p>
<p>Da wir folgend mit polynomial Regressionen arbeiten möchten, empfehlen wir das Paket <code>splines</code> und <code>ggpmisc</code> zu installieren.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="grafiken-erstellen.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(splines)</span>
<span id="cb262-2"><a href="grafiken-erstellen.html#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpmisc)</span></code></pre></div>
<pre><code>## Lade nötiges Paket: ggpp</code></pre>
<pre><code>## 
## Attache Paket: &#39;ggpp&#39;</code></pre>
<pre><code>## Das folgende Objekt ist maskiert &#39;package:ggplot2&#39;:
## 
##     annotate</code></pre>
<p>Wir wollen folglich anhand des Alters das individuelle Nettoeinkommen prognostizieren.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="grafiken-erstellen.html#cb266-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb266-2"><a href="grafiken-erstellen.html#cb266-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb266-3"><a href="grafiken-erstellen.html#cb266-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, inc, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb266-4"><a href="grafiken-erstellen.html#cb266-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> inc, <span class="at">weight =</span> wghtpew, <span class="at">group =</span> sex, <span class="at">colour =</span> sex)) <span class="sc">+</span></span>
<span id="cb266-5"><a href="grafiken-erstellen.html#cb266-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb266-6"><a href="grafiken-erstellen.html#cb266-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb266-7"><a href="grafiken-erstellen.html#cb266-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_poly_eq</span>(<span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="dv">1</span>), </span>
<span id="cb266-8"><a href="grafiken-erstellen.html#cb266-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(..eq.label.., ..rr.label.., <span class="at">sep =</span> <span class="st">&quot;~~~&quot;</span>)), </span>
<span id="cb266-9"><a href="grafiken-erstellen.html#cb266-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">parse =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-193-1.png" width="672" /></p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="grafiken-erstellen.html#cb267-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb267-2"><a href="grafiken-erstellen.html#cb267-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb267-3"><a href="grafiken-erstellen.html#cb267-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, inc, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb267-4"><a href="grafiken-erstellen.html#cb267-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> inc, <span class="at">weight =</span> wghtpew, <span class="at">group =</span> sex, <span class="at">colour =</span> sex)) <span class="sc">+</span></span>
<span id="cb267-5"><a href="grafiken-erstellen.html#cb267-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb267-6"><a href="grafiken-erstellen.html#cb267-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb267-7"><a href="grafiken-erstellen.html#cb267-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_poly_eq</span>(<span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="dv">2</span>), </span>
<span id="cb267-8"><a href="grafiken-erstellen.html#cb267-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(..eq.label.., ..rr.label.., <span class="at">sep =</span> <span class="st">&quot;~~~&quot;</span>)), </span>
<span id="cb267-9"><a href="grafiken-erstellen.html#cb267-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">parse =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-194-1.png" width="672" /></p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="grafiken-erstellen.html#cb268-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb268-2"><a href="grafiken-erstellen.html#cb268-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb268-3"><a href="grafiken-erstellen.html#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(age, inc, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb268-4"><a href="grafiken-erstellen.html#cb268-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> inc, <span class="at">weight =</span> wghtpew, <span class="at">group =</span> sex, <span class="at">colour =</span> sex)) <span class="sc">+</span></span>
<span id="cb268-5"><a href="grafiken-erstellen.html#cb268-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb268-6"><a href="grafiken-erstellen.html#cb268-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb268-7"><a href="grafiken-erstellen.html#cb268-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_poly_eq</span>(<span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="dv">3</span>), </span>
<span id="cb268-8"><a href="grafiken-erstellen.html#cb268-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(..eq.label.., ..rr.label.., <span class="at">sep =</span> <span class="st">&quot;~~~&quot;</span>)), </span>
<span id="cb268-9"><a href="grafiken-erstellen.html#cb268-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">parse =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="RWorkshop_files/figure-html/unnamed-chunk-195-1.png" width="672" /></p>
<p>In Anbetracht der erklärten Varianz in Verhältnis zur Komplexität der Regression scheint eine Polynomfunktion 2. Grades den Zusammenhang am Besten abzubilden. Bei den Männern handelt es sich immerhin um eine Varianzaufklärung von fast 10%.</p>
</div>
</div>
</div>
<div id="facets" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Facets</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="multivariate-datenanalyse.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
